<div class="container mx-auto max-w-2xl px-4 py-8">
  <div class="flex flex-col gap-1 mb-6">
    <h1 class="text-xl font-semibold text-black">Settings</h1>
    <span class="text-xs font-normal text-gray-500">Manage your account and preferences</span>
  </div>

  <div class="rounded-lg border border-gray-200 overflow-hidden bg-white">
    <a
      routerLink="/settings/account"
      class="flex items-center justify-between py-3 px-4 border-b border-gray-100 hover:bg-gray-50 transition-colors"
    >
      <span class="text-sm font-medium text-black">Account</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4 text-gray-400">
        <path d="M9 18l6-6-6-6" />
      </svg>
    </a>
    @if (isHealthAvailable) {
      <button
        type="button"
        (click)="syncAppleHealth()"
        [disabled]="healthSyncing()"
        class="w-full flex items-center justify-between py-3 px-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-left disabled:opacity-60"
      >
        <span class="text-sm font-medium text-black">
          {{ healthSyncing() ? 'Syncingâ€¦' : 'Sync Apple Health' }}
        </span>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4 text-gray-400">
          <path d="M9 18l6-6-6-6" />
        </svg>
      </button>
      @if (healthMessage()) {
        <p class="text-sm px-4 py-2 border-b border-gray-100" [class.text-green-600]="healthMessage()?.includes('synced')" [class.text-amber-700]="healthMessage()?.includes('failed')">{{ healthMessage() }}</p>
      }
    }
    <button
      type="button"
      (click)="openPrivacy()"
      class="w-full flex items-center justify-between py-3 px-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-left"
    >
      <span class="text-sm font-medium text-black">Privacy Policy</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4 text-gray-400">
        <path d="M9 18l6-6-6-6" />
      </svg>
    </button>
    <button
      type="button"
      (click)="openTerms()"
      class="w-full flex items-center justify-between py-3 px-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-left"
    >
      <span class="text-sm font-medium text-black">Terms of Use</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4 text-gray-400">
        <path d="M9 18l6-6-6-6" />
      </svg>
    </button>
    <a
      href="mailto:info@bryanberendsen.nl?subject=Last%20Workout%20-%20Delete%20Account%20Request"
      class="flex items-center justify-between py-3 px-4 border-b border-gray-100 hover:bg-gray-50 transition-colors text-red-600"
    >
      <span class="text-sm font-medium">Delete account</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4">
        <path d="M9 18l6-6-6-6" />
      </svg>
    </a>
    <button
      type="button"
      (click)="logout()"
      class="w-full flex items-center justify-between py-3 px-4 hover:bg-gray-50 transition-colors text-left"
    >
      <span class="text-sm font-medium text-black">Log out</span>
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4 text-gray-400">
        <path d="M9 18l6-6-6-6" />
      </svg>
    </button>
  </div>
</div>

@if (showPrivacyModal) {
  <app-modal
    title="Privacy Policy"
    [show]="true"
    (closed)="closePrivacy()"
  >
    <p class="mb-4">Last Workout ("we", "our") respects your privacy. This policy describes how we collect, use, and protect your information.</p>
    <h3 class="font-semibold text-black mb-2">Information we collect</h3>
    <p class="mb-4">We collect account information (username, name, email, birthdate) and workout data you choose to log.</p>
    <h3 class="font-semibold text-black mb-2">How we use it</h3>
    <p class="mb-4">We use your data to provide the app, show your workout history, streaks, and leaderboard placement.</p>
    <h3 class="font-semibold text-black mb-2">Data retention</h3>
    <p class="mb-4">Your data is retained until you request deletion. Contact info&#64;bryanberendsen.nl to delete your account.</p>
    <h3 class="font-semibold text-black mb-2">Contact</h3>
    <p>Questions? Email info&#64;bryanberendsen.nl</p>
  </app-modal>
}

@if (showTermsModal) {
  <app-modal
    title="Terms of Use"
    [show]="true"
    (closed)="closeTerms()"
  >
    <p class="mb-4">By using Last Workout, you agree to these terms.</p>
    <h3 class="font-semibold text-black mb-2">Use of the app</h3>
    <p class="mb-4">You agree to use the app for lawful purposes only and to provide accurate information when creating an account.</p>
    <h3 class="font-semibold text-black mb-2">Account responsibility</h3>
    <p class="mb-4">You are responsible for keeping your account credentials secure and for all activity under your account.</p>
    <h3 class="font-semibold text-black mb-2">Termination</h3>
    <p class="mb-4">You may request account deletion at any time by contacting info&#64;bryanberendsen.nl.</p>
    <h3 class="font-semibold text-black mb-2">Contact</h3>
    <p>Questions? Email info&#64;bryanberendsen.nl</p>
  </app-modal>
}
