<div class="container mx-auto max-w-2xl px-4 py-8">
    <div class="flex items-center justify-between mb-6">
        <div class="flex flex-col gap-1">
            <h1 class="text-xl font-semibold text-black">Leaderboard</h1>
            <span class="text-xs font-normal text-gray-500">Most recent workouts</span>
        </div>
        <button
            (click)="backToHomescreen()"
            class="btn-primary px-4 py-2 text-sm"
        >
            Back to Homescreen
        </button>
    </div>
    
    <div *ngIf="leaderboard().length === 0" class="text-xs text-gray-500 py-6">
        No leaderboard data available.
    </div>
    
    <div *ngIf="leaderboard().length > 0" class="rounded-lg border border-gray-200 overflow-hidden bg-white">
        <table class="w-full text-xs">
            <thead>
                <tr class="border-b border-gray-200 bg-gray-50">
                    <th class="text-left py-2 px-2 font-medium text-gray-500">#</th>
                    <th class="text-left py-2 px-3 font-medium text-gray-500">User</th>
                    <th class="text-center py-2 px-2 font-medium text-gray-500">Streak</th>
                    <th class="text-right py-2 px-3 font-medium text-gray-500">Last workout</th>
                </tr>
            </thead>
            <tbody>
                <tr
                    *ngFor="let item of leaderboard(); let i = index"
                    class="border-b border-gray-100 last:border-b-0 hover:bg-gray-50"
                >
                    <td class="py-2 px-2 text-gray-400 font-medium">{{ i + 1 }}</td>
                    <td class="py-2 px-3 text-black font-medium">{{ item.username }}</td>
                    @if (item.current_streak > 0) {
                    <td class="py-2 px-2 text-center">
                        <span class="inline-flex items-center justify-center gap-1 text-gray-600 font-medium">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3.5 h-3.5 text-amber-500 shrink-0" aria-hidden="true">
                                <path fill-rule="evenodd" d="M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.177 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248Z" clip-rule="evenodd" />
                            </svg>
                            {{ item.current_streak }} days
                        </span>
                    </td>}
                    @if (item.current_streak === 0) {
                        <td class="py-2 px-2 text-center">
                            <span class="inline-flex items-center justify-center gap-1 text-gray-600 font-medium">
                                No streak
                            </span>
                        </td>}
                    <td class="py-2 px-3 text-right text-gray-500">
                        {{ item.last_workout ? (item.last_workout | date:'medium') : 'â€”' }}
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>